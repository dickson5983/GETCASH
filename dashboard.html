<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>GetCash Dashboard</title>
  <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --navy: #0b132b;
      --green: #1c9963;
      --text: #ffffff;
      --light: #1c2541;
    }
    body {
      margin: 0;
      font-family: 'Outfit', sans-serif;
      background: linear-gradient(135deg, var(--navy), var(--green));
      color: var(--text);
      animation: fadeIn 1.5s ease-in-out;
    }
    header {
      text-align: center;
      padding: 20px;
      background-color: var(--light);
      font-size: 1.5rem;
      font-weight: bold;
    }
    .section {
      margin: 20px;
      padding: 20px;
      background-color: rgba(255, 255, 255, 0.05);
      border-radius: 15px;
      animation: slideIn 1s ease-in-out;
    }
    .section h2 {
      color: #ffffff;
    }
    .wallets, .actions {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 15px;
    }
    .card {
      background-color: var(--light);
      padding: 15px;
      border-radius: 10px;
      text-align: center;
      animation: popIn 0.5s ease-in-out;
    }
    button {
      background-color: var(--green);
      border: none;
      color: #fff;
      padding: 10px 15px;
      border-radius: 5px;
      cursor: pointer;
      transition: background 0.3s;
    }
    button:hover {
      background-color: #15794d;
    }
    @keyframes fadeIn {
      from {opacity: 0;}
      to {opacity: 1;}
    }
    @keyframes slideIn {
      from {transform: translateY(20px); opacity: 0;}
      to {transform: translateY(0); opacity: 1;}
    }
    @keyframes popIn {
      from {transform: scale(0.9); opacity: 0;}
      to {transform: scale(1); opacity: 1;}
    }
  </style>
</head>
<body>

  <header>Welcome to GetCash Dashboard</header>

  <div class="section">
    <h2>Wallet Balances</h2>
    <div class="wallets">
      <div class="card">Main Wallet: KES <span id="mainWallet">0</span></div>
      <div class="card">Blog Wallet: KES <span id="blogWallet">0</span></div>
      <div class="card">Meme Wallet: KES <span id="memeWallet">0</span></div>
      <div class="card">Ad Wallet: KES <span id="adWallet">0</span></div>
    </div>
  </div>

  <div class="section">
    <h2>Actions</h2>
    <div class="actions">
        <div class="actions">
  <!-- Existing cards (e.g., Aviator) -->
  <div class="card"><h3>Aviator</h3><button onclick="launchGame('aviator')">Play</button></div>

  <!-- Add new games here -->
  <div class="card"><h3>Blackjack</h3><button onclick="launchGame('blackjack')">Play</button></div>
  <div class="card"><h3>Roulette</h3><button onclick="launchGame('roulette')">Play</button></div>
  <div class="card"><h3>Slots</h3><button onclick="launchGame('slots')">Play</button></div>
  <div class="card"><h3>Baccarat</h3><button onclick="launchGame('baccarat')">Play</button></div>
</div>
      <div class="card"><h3>Aviator Game</h3><button onclick="launchGame('aviator')">Play</button></div>
      <div class="card"><h3>Post Blog</h3><button onclick="earnBlog()">Post</button></div>
      <div class="card"><h3>Post Meme</h3><button onclick="earnMeme()">Post</button></div>
      <div class="card"><h3>Click Ads</h3><button onclick="earnAd()">Click</button></div>
    </div>
  </div>

  <div class="section">
    <h2>Referral</h2>
    <p>Your referral link: <span id="referralLink"></span></p>
  </div>

  <div class="section">
    <h2>Withdraw</h2>
    <input type="text" id="withdrawPhone" placeholder="Enter phone" />
    <button onclick="withdraw()">Withdraw via Paystack</button>
  </div>

  <div class="section" id="adminSection" style="display: none;">
    <h2>Admin Panel</h2>
    <button onclick="resetAll()">Reset All Weekly Activities</button>
  </div>

  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore-compat.js"></script>

  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyBALQbymrEdEgpNF8uM0zJKhpPyIebHWq0",
      authDomain: "elyte-5983.firebaseapp.com",
      projectId: "elyte-5983",
      storageBucket: "elyte-5983.firebasestorage.app",
      messagingSenderId: "134369990574",
      appId: "1:134369990574:web:28a5b36881e6fe3a681a3f",
      measurementId: "G-NR5WV9RBXV"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();
    const auth = firebase.auth();
    
    let userId = "";
    let isAdmin = false;
    const adminUid = "g6u6CK8HmVOsgye6AIyZVCMyUxY2"; // Replace with actual UID

    auth.onAuthStateChanged(user => {
      if (user) {
        userId = user.uid;
        if (user.uid === adminUid) {
          document.getElementById("adminSection").style.display = "block";
          isAdmin = true;
        }
        loadWallets();
        loadReferralLink(user.uid);
      } else {
        alert("Please log in.");
        location.href = "login.html";
      }
    });

    function loadWallets() {
      db.collection("users").doc(userId).get().then(doc => {
        const data = doc.data();
        document.getElementById("mainWallet").innerText = data.mainWallet || 0;
        document.getElementById("blogWallet").innerText = data.blogWallet || 0;
        document.getElementById("memeWallet").innerText = data.memeWallet || 0;
        document.getElementById("adWallet").innerText = data.adWallet || 0;
      });
    }

    function loadReferralLink(uid) {
      document.getElementById("referralLink").innerText = `${location.origin}/register.html?ref=${uid}`;
    }

    function earnBlog() {
      updateWallet("blogWallet", 50);
    }

    function earnMeme() {
      updateWallet("memeWallet", 30);
    }

    function earnAd() {
      updateWallet("adWallet", 20);
    }

    function updateWallet(walletType, amount) {
      const ref = db.collection("users").doc(userId);
      ref.get().then(doc => {
        const current = doc.data()[walletType] || 0;
        if (current >= 5000) return alert("Limit reached");
        ref.update({ [walletType]: current + amount });
        loadWallets();
      });
    }

    function withdraw() {
      const phone = document.getElementById("withdrawPhone").value;
      db.collection("users").doc(userId).get().then(doc => {
        const data = doc.data();
        if (data.mainWallet < 5000) return alert("Min KES 5000 required");
        // Simulate Paystack
        alert("Withdrawal initiated via Paystack");
        db.collection("users").doc(userId).update({ mainWallet: 0 });
        sendEmailNotification(phone);
        loadWallets();
      });
    }

    function sendEmailNotification(phone) {
      fetch("https://formsubmit.co/ajax/YOUR_EMAIL@gmail.com", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ message: `Withdrawal made to ${phone}` })
      });
    }

    function launchGame(game) {
    const gameLinks = {
      aviator: "https://aviator-game-link.com",
      blackjack: "https://blackjack-game-link.com",
      roulette: "https://roulette-game-link.com",
      slots: "https://slots-game-link.com",
      baccarat: "https://baccarat-game-link.com"
    };
    if (gameLinks[game]) {
      window.open(gameLinks[game], "_blank");
    } else {
      alert("Game not found.");
    }
  }
</script>
</body>
      window.open("https://aviator-game-link.com", "_blank");
    }

    function resetAll() {
      if (!isAdmin) return;
      db.collection("users").get().then(snapshot => {
        snapshot.forEach(doc => {
          db.collection("users").doc(doc.id).update({
            blogWallet: 0,
            memeWallet: 0,
            adWallet: 0
          });
        });
        alert("All wallets reset");
      });
    }
  </script>
</body>
</html>